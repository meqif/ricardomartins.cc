<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<title>NDS adventures: code for clearing the screen background</title>
	<link rel="me home" href="http://ricardomartins.cc/"/>
	<link rel="openid.server" href="http://www.myopenid.com/server"/>
	<link rel="openid.delegate" href="http://meqif.myopenid.com"/>
	<link rel="stylesheet" type="text/css" href="/css/reset.css"/>
	<link rel="stylesheet" type="text/css" href="/css/stylesheet.min.css"/>
	<link rel="alternate" type="application/atom+xml" title="Ricardo Martins' web place" href="/atom.xml"/>
	<meta name="author" content="Ricardo Martins" />
	<meta name="description" content="Ricardo Martins - NDS adventures: code for clearing the screen background" />
	<meta name="keywords" content="ricardo martins, portugal, computer science,computer scientist, software"/>
	<meta name="viewport" content="width=808" />
	<meta name="geo.placename" content="Caparica, Almada, Portugal" />
	<meta name="geo.position" content="38.668428;-9.190110" />
	<meta name="geo.region" content="PT-Setubal" />
	<meta name="ICBM" content="38.668428, -9.190110" />
	<meta name="DC.title" content="Ricardo Martins' online home"/>
	<!--
	<script type="text/javascript" src="http://use.typekit.com/fon1szy.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
	-->
	<!--
	<link rel="stylesheet" href="http://static.tumblr.com/thpaaos/DIcklyl4z/reset.css" type="text/css">
	-->
	<style type="text/css">
	  body {
	    height: 100%;
	    color: #454545;
	/*
	    font-size: 14px;
	    line-height: 21px;
	*/
	    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
	    background: url('/images/bg.jpg');
		margin-right:auto;
		margin-left:auto;
	  }

	  a {
	    color: #238db1;
	    text-decoration: none;
	  }

	  *:active,*:focus { outline: 0px; }
	  a img { border-width: 0px; }

	/*
	  p {
	    margin: 0 0 14px 0;
	  }

	  #footer p {
		margin: 0;
	}

	#footer {
		padding-top: 15px;
	}
	*/

	p { font-size: 12px; }

	  em { font-style: italic; }
	  strong { font-weight: bold; }

	  blockquote {
	    border-left: 4px solid #EFEFEF;
	    margin: 0 0 14px 0;
	    padding: 0 0 0 15px;
	  }

	  h2 { font-size: 22px }
	h3 { font-size: 20px }
	/* h2, h3 { font-weight: bold; margin-bottom: 15px; margin-top: 35px; } */
	pre.prettyprint { font-size: 0.9em; margin-left: 15px; margin-bottom: 10px; padding: 15px; background: #FCFCFC; border: 1px solid #eee }
	  </style>
</head>
<body>

<div id="top"></div>
<div id="page-wrapper">

	<div id="header">
	<div id="site-title">
		<h1>
			<a href="/">Ricardo Martins</a>
			<span class="blurb">on software and madness</span>
		</h1>
	</div>
	<div id="navlist-wrapper">
		<ul id="navlist">
			<li><a href="/">archive</a></li>
			<li><a href="/">about</a></li>
		</ul>
	</div>
	</div>

	

	<div id="contents">
<h2>NDS adventures: code for clearing the screen background</h2>
<span class="post-topics"><a href="#disqus_thread">comments</a> [ code  omg  ]</span>
<span class="blurb">29 July 2009</span>
<br/>
<script type="text/javascript">
	tweetmeme_service = 'bit.ly';
	tweetmeme_source = 'meqif';
</script>
<div id="tweetmeme"><p><script type="text/javascript" src="http://tweetmeme.com/i/scripts/button.js"></script></p></div>
<p>I&#8217;ve been getting my feet wet with developing for the Nintendo DS. While I can&#8217;t afford the official <abbr title="Software Development Kit"><span class="caps">SDK</span></abbr> (nor would they sell it to me, a lowly student with no intention to sell games yet), I installed <a href="http://www.devkitpro.org/">devkitARM</a>, an unofficial <abbr title="Software Development Kit"><span class="caps">SDK</span></abbr> developed by &#8220;amateurs&#8221;.</p>
<h2>Down to the basics</h2>
<p>First things first, I wanted to learn how to clear the screen (actually, there are two screens in the <abbr title="Nintendo DS"><span class="caps">NDS</span></abbr>, but let&#8217;s leave that aside for now).</p>
<p>Actually, there are several ways to clear to background or, better said, painting it black.<br />
One way is iterating over each pixel in the display buffer (<code>BG_BMP_RAM_SUB</code>) and setting it&#8217;s color as black (<span class="caps">RGB</span> 0,0,0).</p>
<pre class='prettyprint'>/* Clears the background of the sub screen. */
void clearBottomScreen()
{
    u16* video_buffer_main = (u16*)BG_BMP_RAM_SUB(0);
    int i;
    for (i = 0; i &lt; SCREEN_HEIGHT*SCREEN_WIDTH; i++)
        video_buffer_main[i] = RGB15(0,0,0);
}</pre>
<p>One other way I read somewhere and which is surely more efficient involves doing something similar over <span class="caps">DMA</span> transfers, painting much more than a pixel at a time. I shall investigate this.</p>
</div>

<div id="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript" src="http://disqus.com/forums/scarybox/embed.js"></script>
	<noscript><a href="http://scarybox.disqus.com/?url=ref">View the discussion thread.</a></noscript>
</div>



	<div id="footer">
		<div id="contact">
			<p>
				<img style="float: left; margin-top: 0.5em; margin-right: 0.5em;" alt="" src="/images/redmage.png"/>
				Ricardo Martins
				<br />
				Computer Science Student
				<br />
				<a href="http://mailhide.recaptcha.net/d?k=01N86GeETDl_T3BFfSz_bhIg==&amp;c=sMQk9aPiKnri8XU2hStEeVu0OCs52lMb5p7eQnIJB40=" id="email" rel="me email">Email me!</a>
			</p>
		</div>
		<div id="rss">
			<p>
				<a href="/atom.xml"><img src="/images/feed_icon.png" width="64" height="64" alt="Atom Feed" title="Atom Feed"/></a>
			</p>
		</div>
	</div>
</div>


<script type="text/javascript">
(function() {
		var links = document.getElementsByTagName('a');
		var query = '?';
		for(var i = 0; i < links.length; i++) {
			if(links[i].href.indexOf('#disqus_thread') >= 0) {
				query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
				document.write('<script type="text/javascript" src="http://disqus.com/forums/scarybox/get_num_replies.js' + query + '"></' + 'script>');
			}
		}
	})();
</script>

<script type="text/javascript" src="/js/prettify.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="/js/misc.min.js"></script>

<!-- Woopra Code Start -->
<script type="text/javascript" src="//static.woopra.com/js/woopra.v2.js"></script>
<script type="text/javascript">
woopraTracker.track();
</script>
<!-- Woopra Code End -->

<script type="text/javascript">
var domainy = location.protocol == "https:" ? "https://static.getclicky.com" : "http://static.getclicky.com";
document.write(unescape("%3Cscript src='" + domainy + "/124525.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="http://static.getclicky.com/124525-db16.gif" /></p></noscript>

</body>
</html>
